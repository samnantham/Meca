<div class="hbox hbox-auto-xs hbox-auto-sm new-home" ng-controller="DashboardCtrl">
    <!-- main -->
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-xs p-l-none m-b">
        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 m-t p-l-none m-p-r-none">
            <div class="panel panel-default r-3x m-l whatsnew">
                <div class="panel-heading r-3x r-b-none bg-main2 text-center font-bold m-b-sm menu_bg_red">
                    What's New
                </div>
                <div class="col-xs-12 bg-white padder-v padder r-b-6x m-b d_i_b" ng-scrollbars
                    ng-scrollbars-config="scrollconfig">
                    <div class="col-xs-12 bg-main1 text-center sm-padder-v sm-padder menu_bg_yellow">MECA CAMPUS
                    </div>
                    <div class="col-xs-12 p-l-none p-r-none">
                        <div class="m-t m-b">
                            <div class="col-sm-3 p-l-none p-xs-l">
                                <div class="bg-main1 menu_bg_orange text-center f12 sm-padder-v sm-padder">Category
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="bg-main1 menu_bg_orange text-center f12 sm-padder-v sm-padder">Time</div>
                            </div>
                            <div class="col-sm-4">
                                <div class="bg-main1 menu_bg_orange text-center f12 sm-padder-v sm-padder">Title</div>
                            </div>
                            <div class="col-sm-2 p-r-none p-xs-r">
                                <div class="bg-main1 menu_bg_orange text-center f12 sm-padder-v sm-padder">Written by
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 p-l-none p-r-none border-bottom-1 m-b-xs"
                        ng-repeat="(key,whatsnew) in homeData.whatsnew" ng-class="{'m-t': key == 0}">
                        <div class="col-sm-3 p-l-none m-p-r-none">
                            <div class="text-left f12 sm-padder-v sm-padder color_2">
                                <strong>
                                    <img class="new-icon" src="img/new.png" ng-if="!whatsnew.viewinfo" />
                                    <span ng-class="{'pad-left-30px': !whatsnew.viewinfo}"
                                        ng-if="whatsnew.whatsnew_type > 1 && whatsnew.whatsnew_type <= 14">
                                        {{ whatsnew.whatsnew_type == 2 ? 'MEBIT Event' : whatsnew.whatsnew_type == 3 ?
                                        'Kaizen - ' + whatsnew.typeData.type : whatsnew.whatsnew_type == 4 ?
                                        'From TMC' : whatsnew.whatsnew_type == 6 ? 'One & Only Day' :
                                        whatsnew.whatsnew_type == 7
                                        ? 'Training' : whatsnew.whatsnew_type == 8
                                        ? 'GR' : whatsnew.whatsnew_type == 9
                                        ? 'MaaS - ' + whatsnew.typeData.type : whatsnew.whatsnew_type == 12
                                        ? 'Promotion' : whatsnew.whatsnew_type == 14
                                        ? 'Dakar' : whatsnew.whatsnew_type }}
                                    </span>
                                </strong>
                                <div class="clear"></div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="text-left h5 sm-padder-v sm-padder color_3 f-10 m-t-xs">
                                {{convertDate(whatsnew.created_at) | date:'dd MMM yyyy HH:mm'}}
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="text-left f12 font-bold sm-padder-v sm-padder cursor text-ov"
                                ng-click="viewItem(whatsnew)">
                                {{whatsnew.title}}
                            </div>
                        </div>
                        <div class="col-sm-2 p-r-none">
                            <div class="text-left f12 sm-padder-v sm-padder color_2 text-ov">
                                <strong>
                                    <span ng-if="whatsnew.whatsnew_type == 2">{{whatsnew.ownerprofile.username}}</span>
                                    <span
                                        ng-if="whatsnew.whatsnew_type == 3 || whatsnew.whatsnew_type == 6 || whatsnew.whatsnew_type == 8 || whatsnew.whatsnew_type ==  9 || whatsnew.whatsnew_type ==  12">
                                        {{whatsnew.writerinfo ? whatsnew.writerinfo.name : (whatsnew.is_admin ?
                                        whatsnew.ownerprofile.username + '(Admin)' : whatsnew.ownerprofile.first_name +
                                        ' ' + whatsnew.ownerprofile.last_name + ' - ' +
                                        whatsnew.ownerprofile.distributorinfo.name)}}
                                    </span>
                                    <span ng-if="whatsnew.whatsnew_type == 4"> Admin </span>
                                    <span ng-if="whatsnew.whatsnew_type == 7"> Admin </span>
                                    <span ng-if="whatsnew.whatsnew_type == 14"> Admin </span>
                                </strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 m-t m-p-r-none promtearea">
            <div ng-scrollbars ng-scrollbars-config="scrollconfig">

                <div class="promotion-area m-b">
                    <div class="panel panel-default r-3x ">
                        <div
                            class="panel-heading r-3x r-b-none text-center font-bold text-left bg-main1 menu_bg_orange">
                            Promotion: The advertising revenue of this space will be used for contribution activities to
                            the
                            SDGs.
                        </div>
                        <div class="panel-body">
                            <div class="bg-white r-b-6x">
                                <div class="col-xs-12 no-padder">
                                    <div class="m-b-xs">
                                        <a class="h5 font-bold">
                                            <iframe width="100%" style="height:180px;"
                                                src="https://www.youtube.com/embed/cvtEDgSieno?autoplay=1&mute=1&loop=1&playlist=cvtEDgSieno"
                                                title="YouTube video player" frameborder="0"
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                allowfullscreen></iframe>
                                        </a>
                                        <a>
                                            <h6 ng-click="openPDF('https://www.toyota-dreamcarart.com/meca/');">
                                                <b>Toyota Dream Car Art Contest</b>
                                            </h6>
                                        </a>
                                        
                                        <div class="cursor-no">"Toyota Dream Car Art Contest MECA Regional Awards Online
                                            Ceremony Digest" <br> <br>
                                            Online Awards Ceremony was held on March 26th for the MECA Regional Awards
                                            winners.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="promotion-area m-b">
                    <div class="panel panel-default r-3x ">
                        <div class="panel-heading r-3x r-b-none text-center font-bold text-left bg-main1 menu_bg_orange">
                            Promotion: The advertising revenue of this space will be used for contribution activities to the SDGs.
                        </div>
                        <div class="panel-body">
                            <div class="bg-white r-b-6x">
                                <slick ng-if="!loading" init-onload="true" data="promotions" settings="PromoslickConfig">
                                    <div class="col-md-3 col-lg-2 col-sm-3 col-xs-6 no-padder" ng-repeat="(key,data) in promotions">
                                        <div class="col-xs-12 no-padder padder-v bg-white" ng-if="data.type == 3">
                                            <div class="col-xs-12 no-padder">
                                                <div class="m-b-xs">
                                                    <iframe width="100%" style="height:26vh;" ng-src="{{data.src}}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                    <h6><b>{{data.title}}</b></h6>
                                                    <span read-more="data.content" read-more-limit="150" read-more-label-expand="... See More" read-more-label-collapse="... See Less">
                                                            <div ng-bind-html="data.content"></div>
                                                        </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 no-padder padder-v bg-white" ng-if="data.type == 1">
                                            <div class="col-xs-12 no-padder" ng-click="openPDF('https://www.toyota-dreamcarart.com/meca/');">
                                                <div class="m-b-xs">
                                                    <div class="dis-img box-shadow b r-3x cursor" background-image="{{data.src}}"></div>
                                                    <h6><b>{{data.title}}</b></h6>
                                                    <div ng-bind-html="data.content"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </slick>
                            </div>
                        </div>
                    </div>
                </div> -->
                <div class="promotion-area m-t m-b" ng-if="homeData.onlyDays.length > 0">
                    <div class="panel panel-default r-3x">
                        <div class="panel-heading r-3x r-b-none bg-main1 text-left font-bold cursor menu_bg_yellow">
                            <span class="cursor">One and Only Day</span><a
                                class="btn btn-default btn-xs bg-main2 pull-right b-no f-10 menu_bg_orange"
                                ui-sref="app.oneandonly">Show
                                All</a>
                        </div>
                        <div class="panel-body pos-rlt">
                            <!-- <div class="top-caption cursor" ui-sref="app.oneandonly">One and Only Day</div> -->
                            <div class="bg-white r-b-6x">
                                <slick ng-if="!loading" init-onload="false" data="homeData.onlyDays"
                                    settings="slickConfig">
                                    <div class="col-md-3 col-lg-2 col-sm-3 col-xs-6 no-padder"
                                        ng-repeat="(key,data) in homeData.onlyDays">
                                        <div class="col-xs-12 no-padder padder-v bg-white">
                                            <div class="col-xs-12 no-padder" ng-click="clickTMC(data)">
                                                <div class="m-b-xs" ui-sref="app.viewoneandonly({'id':data.id})">
                                                    <a class="h5 font-bold"> {{data.title}} </a>
                                                </div>
                                                <div class="dis-img box-shadow b r-3x cursor"
                                                    ui-sref="app.viewoneandonly({'id':data.id})"
                                                    background-image="{{IMGURL}}{{data.cover_image}}"></div>
                                            </div>
                                            <div class="col-xs-12 no-padder">
                                                <small
                                                    class="block mebit-desc m-t text-justify">{{data.plain_description}}</small>
                                            </div>
                                        </div>
                                    </div>
                                </slick>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="promotion-area">
                    <div class="panel panel-default r-3x">
                        <div class="panel-heading r-3x r-b-none bg-main1 text-center font-bold menu_bg_red">
                            From TMC
                        </div>
                        <div class="panel-body" ng-class="{ 'pinky' : isCurrent }">
                            <div class="bg-white r-b-6x">
                                <slick ng-if="!loading" init-onload="false" data="homeData.tmcs"
                                    settings="TMCslickConfig">
                                    <div class="col-md-3 col-lg-2 col-sm-3 col-xs-6 no-padder"
                                        ng-repeat="(key,data) in homeData.tmcs">
                                        <div class="col-xs-12 no-padder padder-v bg-white"
                                            ng-class="{ 'pinky' : data.pinky }">
                                            <div class="col-xs-12 no-padder" ng-click="clickTMC(data)">
                                                <div class="m-b-xs">
                                                    <a class="h5 font-bold"> {{data.title}} </a>
                                                </div>
                                                <div class="dis-img box-shadow b r-3x"
                                                    background-image="{{IMGURL}}{{data.cover_image}}"></div>
                                            </div>
                                        </div>
                                    </div>
                                </slick>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 m-t mebit-ad m-p-r-none">
            <div class="promotion-area m-b feed-area" ng-scrollbars ng-scrollbars-config="chatscrollconfig">
                <div class="panel panel-default r-3x">
                    <div class="panel-heading r-3x r-b-none bg-main1 text-left menu_bg_red">
                        <span class="font-bold"> MECA Post </span> <a
                            class="btn btn-default btn-xs pull-right b-no f-10"
                            ng-click="ModalOpen('feedModal','FeedModalController');">Add New</a>
                    </div>
                    <div class="panel-body p-t-none p-l-none p-r-none">
                        <!-- bdr-1px  -->
                        <div class="feed-item" ng-class="{'feed-item-data': !$last, 'pinky' : feed.show_on_top }"
                            ng-repeat="(key,feed) in feeds">
                            <div class="col-sm-12 m-b-xs">
                                <div class="feed-img-holder p-l">
                                    <img class="feed-img" ng-src="{{IMGURL + feed.ownerprofile.avatar}}">
                                </div>
                                <div class="feed-info">
                                    <div class="f12"><strong>{{ feed.is_admin ?
                                            feed.ownerprofile.username + '(Admin)' : feed.ownerprofile.first_name +
                                            ' ' + feed.ownerprofile.last_name + ' - ' +
                                            feed.ownerprofile.distributorinfo.name }}</strong></div>
                                    <div class="f8">{{ convertDate(feed.created_at) | amDateFormat:'DD MMM YYYY
                                        hh:mm a' }}
                                    </div>
                                </div>
                                <div class="btn-group dropdown feed_more"
                                    ng-if="(!feed.is_admin && (feed.user == user.id) )|| feed.document_link">
                                    <span data-toggle="dropdown" aria-expanded="false"><i
                                            class="fa fa-ellipsis-h f13 cursor" aria-hidden="true"></i></span>
                                    <ul class="dropdown-menu">
                                        <li ng-class="{'b_be' : (!feed.is_admin && (feed.user == user.id)) }"
                                            ng-if="feed.document_link"><a ng-href="{{IMGURL}}{{feed.document_link}}"
                                                download="{{feed.document_link.split('/').pop()}}" target="_blank"><i
                                                    class="fa fa-download m-r color_2 f13"
                                                    aria-hidden="true"></i>Download</a></li>
                                        <li ng-class="{'b_be' : (!feed.is_admin && (feed.user == user.id)) }"
                                            ng-if="(!feed.is_admin && (feed.user == user.id))"><a
                                                ng-click="deleteFeed(key,feed.id)"><i
                                                    class="fa fa-trash m-r color_2 f13" aria-hidden="true"></i>Delete
                                                post</a></li>
                                        <li ng-if="(!feed.is_admin && (feed.user == user.id))"><a
                                                ng-click="editFeed(key,feed)"><i class="fa fa-pencil m-r color_2 f13"
                                                    aria-hidden="true"></i>Edit
                                                post</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="bg-white r-b-6x">
                                <div class="col-xs-12 wrapper">
                                    <carousel interval="5000" ng-if="feed.type == 1 && feed.images.length > 1">
                                        <slide ng-repeat="(key,image) in feed.images">
                                            <div class="caurosbase_holder">
                                                <div class="cauros_holder">
                                                    <img ng-src="{{IMGURL}}{{image}}" class="feeder_img">
                                                </div>
                                            </div>
                                        </slide>
                                    </carousel>
                                    <img src="{{IMGURL}}{{feed.images[0]}}" class="feeder_img"
                                        ng-if="feed.type == 1 && feed.images.length == 1">
                                    <anguvideo ng-model="feed.video_link" width="100%" height="100%"
                                        ng-if="feed.type == 2">
                                    </anguvideo>

                                </div>
                            </div>
                            <div class="col-xs-12" popover-trigger="{{ feed.show_on_top ? 'manual': 'none' }}"
                                popover-template="'tpl/blocks/popover-temp.html'" popover-placement="top-center"
                                popover-is-open="(feed.show_on_top && feed.showPopup)" id="feed{{key}}">
                                <div class="m-b-xs m-t-xs" ng-bind-html="feed.content">
                                    <!-- <span read-more="feed.content" read-more-limit="150" read-more-label-expand="... See More" read-more-label-collapse="... See Less" ng-if="feed.content.length > 149">{{feed.content}}
                                    </span>
                                    <span ng-if="feed.content.length <= 149">{{feed.content}}
                                    </span> -->
                                </div>
                                <div class="like_comment_holder">
                                    <div class="like_holder color_2">
                                        <!-- ng-click="showlikeInfo(feed.likemembers)" -->
                                        <i class="fa fa-2x cursor"
                                            ng-class="feed.isLiked ? 'fa-thumbs-up':'fa-thumbs-o-up'" aria-hidden="true"
                                            ng-click="changeFeedLike(key,feed,1)"></i><span>
                                            {{feed.likes}}
                                            likes</span>
                                    </div>
                                    <div class="comment_holder color_2 cursor" ng-click="showHideComments(key,feed)">
                                        <i class="fa fa-comment-o fa-2x" aria-hidden="true"></i><span>
                                            {{feed.comments.length}}
                                            Comments</span>
                                    </div>
                                    <div class="clear_both"></div>
                                </div>
                                <div class="comment_display animationIf" ng-if="feed.showComment">
                                    <div class="comment_hold m-t m-b" ng-repeat="(no,comment) in feed.comments">
                                        <div class="comment-img-holder p-l">
                                            <img class="comment-img" ng-src="{{IMGURL + comment.ownerprofile.avatar}}">
                                        </div>
                                        <div class="comment-info-hold">

                                            <div class="info">
                                                <div class="color_2"><strong>{{ comment.is_admin ?
                                                        comment.ownerprofile.username :
                                                        (comment.ownerprofile.first_name + ' ' +
                                                        comment.ownerprofile.last_name)
                                                        }}</strong> </div>
                                                <b ng-if="comment.parentcomment"> @ {{ comment.parentcomment ?
                                                    comment.parentcomment.ownerprofile.first_name + ' ' +
                                                    comment.parentcomment.ownerprofile.last_name : '' }}</b>
                                                {{comment.comment}}
                                            </div>
                                            <div class="m-t-xs">
                                                <div class="row color_2">
                                                    <div class="col-sm-3 cursor"
                                                        ng-click="changeCommentLike(no,comment,2)">
                                                        {{comment.isLiked ? 'Un ' : ''}} Like</div>
                                                    <div class="col-sm-3 cursor" ng-click="replyComment(key,comment)">
                                                        Reply</div>
                                                    <div class="col-sm-3 cursor"
                                                        ng-click="deleteComment(key,no,comment)"
                                                        ng-if="(!comment.is_admin && (comment.user == user.id))">
                                                        Delete
                                                    </div>
                                                    <div class="col-sm-3 text-right cursor"
                                                        ng-click="showlikeInfo(comment.likemembers)"><i
                                                            class="fa fa-thumbs-o-up f12" aria-hidden="true"></i><span>
                                                            {{comment.likes}}</span></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clear_both"></div>
                                    </div>
                                </div>
                                <div class="replytext m-sm" ng-if="commentData.is_reply && feed.showReply">Replying
                                    to
                                    <b>{{
                                        commentData.ownerprofile.first_name + ' ' +
                                        commentData.ownerprofile.last_name
                                        }}</b> .<a ng-click="cancelReply(key)">cancel</a>
                                </div>
                                <div class="comment_form m-t-xs m-b-xs ">
                                    <form>
                                        <input class="comment_field" type="text" name=""
                                            placeholder="Write your comment..." ng-model="feed.comment"
                                            my-enter="addComment(key,feed)">
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12" ng-if="feeds.length  ==  0">
                            <div class="w-full text-center bg-white wrapper-lg m-t-md margin_mid">
                                <h4>Currently no Feeds</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="PopupModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        data-backdrop="static" data-keyboard="false" data-modalFade="true">
        <div class="modal-dialog" role="document" style="width: 70%;">
            <div class="modal-content m-p-r m-p-l" ng-class="{'wrapper-xl' : !isMobile}">
                <div class="modal-header b-no text-center">
                    <button type="button" class="close" ng-click="closeModal();" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel" ng-if="showList">Event List ({{activeDate | date:'dd
                        MMMM yyyy'}})
                    </h4>
                </div>
                <div class="modal-body" ng-scrollbars ng-scrollbars-config="scrollconfig"
                    ng-scrollbars-update="updateScrollbar">
                    <div class="table-Data">
                        <div class="panel panel-default">
                            <div class="table-responsive overx-visible">
                                <table class="table table-striped b-t">
                                    <thead>
                                        <tr>
                                            <th class="text-left">#</th>
                                            <th class="text-center">Title</th>
                                            <th class="text-left">Description</th>
                                            <th class="text-left">Start Date</th>
                                            <th class="text-left">End Date</th>
                                            <th class="text-center">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="(key,data) in calenderevents">
                                            <td class="text-left">{{ key + 1}}</td>
                                            <td class="text-center">{{::data.title}}</td>
                                            <td class="text-left">{{ data.description | cut:true:50:'' }}</td>
                                            <td class="text-center">{{ convertDate(data.start_date) |
                                                date:'dd-MM-yy' }}
                                            </td>
                                            <td class="text-center">{{ data.end_date ? (convertDate(data.end_date) |
                                                date:'dd-MM-yy') : ' - ' }}
                                            </td>
                                            <td class="text-center">
                                                <button class="btn m-b-xs btn-sm btn-info btn-addon text-capt"
                                                    ng-click="gotoItem(data.event_type,data.id)"><i
                                                        class="fa fa-chevron-right"></i>Goto
                                                    {{data.event_type}}</button>
                                            </td>
                                        </tr>
                                        <tr ng-if="calenderevents.length == 0 && !loading">
                                            <td colspan="5" class="text-center">Sorry No Records</td>
                                        </tr>
                                        <tr ng-if="loading">
                                            <td colspan="5" class="loadingcss" ng-if="executives.length==0"
                                                button-spinner="loading">
                                                {{loadingMsg}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer text-center b-no">
                    <div class="col-xs-12 text-center">
                        <button type="button" ng-click="closeModal();"
                            class="btn btn-primary no-border m-auto bg-main1 w-xs">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="EventInfoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        data-backdrop="static" data-keyboard="false" data-modalFade="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-main1 b-no text-center">
                    <button type="button" class="close" ng-click="closeModal();" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">{{formData.title}}</h4>
                </div>
                <div class="modal-body wrapper-lg">
                    <div class="row m-t-sm">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <p>{{formData.info}}</p>
                        </div>
                    </div>
                    <div class="row m-t-sm">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-if="formData.caleventInfo.type < 4">
                            <a class="btn btn-default btn-xs btn-danger r-2x read_more pull-left text-u-c cursor"
                                ng-click="viewEvent()" target="_blank">
                                Goto {{ (formData.caleventInfo.type == '1' ? 'Event' : formData.caleventInfo.type ==
                                '2'
                                ? 'TBP' : (formData.caleventInfo.type == '3' ? 'Report' :
                                formData.caleventInfo.type))
                                }}
                            </a>
                        </div>
                    </div>
                </div>
                <div class="modal-footer text-center b-no">
                    <div class="col-xs-12 text-center">
                        <button type="button" class="btn btn-primary no-border m-auto bg-main2 w-xs"
                            ng-click="closeModal()" ng-disabled="loading">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>